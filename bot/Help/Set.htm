<!DOCTYPE html>
<html>
<head>
<title>Set — UoPilot</title>
<meta charset="UTF-8" />
<link rel="stylesheet" href="styles" />
</head>
<body>
<h1 id="firstHeading" class="firstHeading" lang="ru">Set</h1>
	
	<h2><span id="Описание"></span><span class="mw-headline" id=".D0.9E.D0.BF.D0.B8.D1.81.D0.B0.D0.BD.D0.B8.D0.B5">Описание</span></h2>
<p>Запись значения в переменную и/или ее объявление.
</p>
<h2><span id="Синтаксис"></span><span class="mw-headline" id=".D0.A1.D0.B8.D0.BD.D1.82.D0.B0.D0.BA.D1.81.D0.B8.D1.81">Синтаксис</span></h2>
<p>Привязка к окну: Нет.
<br />Работа со свернутым окном: Да.
</p>
<pre>set #&lt;имя&gt; &lt;значение1&gt; [&lt;зн. оп.&gt; &lt;значение2&gt;]
set $&lt;имя&gt; &lt;значение&gt;  
set&#160;%&lt;имя&gt; [элемент] &lt;значение&gt;
</pre>
<p><b>#</b> - признак числовой переменной, может содержать только числа, позволяет выполнять математические операции.   
<br /><b>$</b> - признак строковой переменной, может содержать любые символы.
<br /><b>%</b> - признак массива (переменные сгруппированные под одним именем), может содержать любые символы.
<br /><b>&lt;имя&gt;</b> - в имени переменной допустимы символы - ['0'..'9','A'..'z','А'..'я'], регистр не учитывается.
<br /><b>&lt;значение&gt;</b> - может содержать цифры, буквы, символы. Так же может быть результатом работы функции, например, set #var random(10).
</p><p>При двух или более запущенных скриптах вы можете обращаться к переменным, определенным в других скриптах пилота.
</p>
<pre>#i.2 - обращаемся к переменной #i из скрипта, находящегося в окне номер 2, при этом скрипт 2 должен работать или быть на паузе.
$i.5 - обращаемся к строковой переменной из 5 скрипта.
%arr.5 [1 3] - обращаемся к элементу массива из 5 скрипта.
</pre>
<h2><span id="Примеры"></span><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B">Примеры</span></h2>
<pre>// Пример 1
set #c 5              //записать константное число в переменную
msg #c
End_script
</pre>
<pre>// Пример 2
set $a qwerty         //записать константную строку в переменную
msg $a
End_script
</pre>
<pre>// Пример 3
set #mana #mana + 1   //записать результат арифметической операции в переменную, в данном случае инкрементация
msg #mana
</pre>
<pre>// Пример 4
set #b Findcolor ( #xx1 #yy1 #xx2 #yy2 1 1 3355443 %arr 2) //записать возвращаемые данные из функции в переменную
</pre>
<pre>// Пример 5
//одномерный массив
set %arr [1] 123
set %arr [2] 432
set %arr [3] 687
msg %arr [1] %arr [2] %arr [3]
End_script
</pre>
<pre>// Пример 6
//двумерный массив
set %arr [1 1] 123
set %arr [1 2] 432
set %arr [2 1] 687
set %arr [2 2] 831
msg %arr [1 1] %arr [1 2]
msg %arr [2 1] %arr [2 2]
End_script
</pre>
<pre>// Пример 7
//сложение числовых переменных
set #a 10
set #b 13
set #c #a + #b
msg #c
End_script
</pre>
<pre>// Пример 8
//Получить псевдослучайное число
set #a random (10)           //в данном случае от 0 до 9
msg #a
</pre>
<pre>// Пример 9
//получение переменной из другого скрипта (при этом скрипт из которого надо получить переменную должен работать)
set #a #b.2                  //присвоить переменной #a значение переменной #b из 2 скрипта
set $a #b.2                  //для строковой переменной
set %arr [1 1] #b.2          //для массива
set %arr [1 2] %arr.2 [1 1]  //присвоить элементу массива значение элемента массива из 2 скрипта
</pre>
<pre>// Пример 10
set #abc 10 / 3              //при нецелом делении дробная часть будет отброшена.
msg #abc
End_script
</pre>
<pre>// Пример 11
// Так как числовые переменные могут содержать только целые числа, то результат нужно округлять
// Корень из 137 (11,7):
set #a round(sqrt(137))      // вычислить корень и округлить до ближайшего целого: 12 
msg #a
set #a floor(sqrt(137))      // вычислить корень и округлить до ближайшего целого, которое меньше 11,7: 11
msg #a
//если нужен точный результат, то используйте строковую переменную
//но учтите, чтобы в дальнейшем использовать эту переменную, её всё равно придётся округлить
set $a sqrt(137)
    msg $a 
End_script
</pre>
<h2><span id="Смотрите_также"></span><span class="mw-headline" id=".D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5">Смотрите также</span></h2>
<p><a href="https://uopilot.uokit.com/wiki/index.php?title=%D0%9F%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5_%D0%B8%D0%B7_%D0%B4%D1%80%D1%83%D0%B3%D0%B8%D1%85_%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D0%BE%D0%B2" title="Переменные из других скриптов">Переменные из других скриптов</a>
<br /><a href="https://uopilot.uokit.com/wiki/index.php?title=Set_clipboard" title="Set clipboard">Set clipboard</a>
<br /><a href="https://uopilot.uokit.com/wiki/index.php?title=Set_windowpos" title="Set windowpos">Set windowpos</a>
<br /><a href="https://uopilot.uokit.com/wiki/index.php?title=SetSelectedText" title="SetSelectedText">SetSelectedText</a>
<br /><a href="https://uopilot.uokit.com/wiki/index.php?title=Setwindowtext" title="Setwindowtext">Setwindowtext</a>
</p>
<h2><span id="История_развития"></span><span class="mw-headline" id=".D0.98.D1.81.D1.82.D0.BE.D1.80.D0.B8.D1.8F_.D1.80.D0.B0.D0.B7.D0.B2.D0.B8.D1.82.D0.B8.D1.8F">История развития</span></h2>
<p><b>0.98 beta</b>
<br />добавил переменные.
в имени переменной допустимы символы - ['0'..'9','A'..'z','А'..'я'], регистр не учитывается.
отныне слово следующее за '#' считается именем переменной и заменяется ее значением, если оно было присвоено ранее. исключением является первое слово после команд set и for.  переменные изменяются только при участии set и for, команда repeat использует значение, не изменяя его.
</p><p>добавил команду 'set' - установка\добавление переменных
Set $&lt;имя&gt; &lt;значение&gt; или
Set #&lt;имя&gt; &lt;знач1&gt; [&lt;зн. оп.&gt; &lt;знач2&gt;]
между знаком операции и значениями должен быть разделитель.
поддерживаются следующие операции: +, -, *, /
при делении результат округляется к ближайшему целому.
</p>
<pre>Set #i #i + 1
Set $s test string
</pre>
<p><b>1.04 beta 2</b>
<br />Добавил строковые переменные. Отныне символ '$' считается идентификатором строковой переменной
<br />Добавил возможность изменения кучи всякого полезного мусора в UO.
set &lt;параметр&gt; &lt;значение&gt; // где &lt;параметр&gt; есть одно из следующего: target, lastobjectid, lastobjecttype, lasttargetid, lasttargetx, lasttargety, lasttargetz, lasttargetkind, lastliftedid, lastskill, lastspell, laststatictype.
</p><p><b>1.05 beta 1</b>
<br />Теперь можно использовать всякие извращенные формулы в команде set. переменные должны быть выделены пробелом.
</p>
<pre>set #q ((5+4)/(3+-2)* #e )-(2-(-5+9))*3
</pre>
<p><b>1.05 beta 3</b>
<br />Добавил возможность использовать случайные числа в условных операторах и команде set. random &lt;number&gt; возвращает число в диапазоне от 0 до number-1
</p>
<pre>set #a random 2 
</pre>
<p><b>1.07 beta 4</b>
<br />добавил возможность использовать переменные из параллельных скриптов, добавив к имени переменной номер скрипта через точку
</p>
<pre>set #i.2 5
</pre>
<p>Добавил возможность использовать характеристики персонажа из параллельных скриптов, добавив к имени переменной номер скрипта через точку
</p>
<pre>set lasttargetid.1 7
</pre>
<p><b>1.07 beta 5</b>
<br />Добавил массивы. отныне символ процента '%' считается идентификатором массива. индексы массива указываются после имени в квадратных скобках '[' и ']'. размер массива равен максимальному использованному индексу. присваивание значений осуществляется каждому элементу индивидуально. элементы массива могут содержать как строки, так и числа. 
допустимо ссылаться на массивы параллельных скриптов, указав после имени массива, через точку, номер скрипта.
при указании только первого индекса в двумерном массиве, результатом будет строка из всех элементов второй размерности массива, соответствующих указанному индексу, и разделенных пробелом
//set %ar [4] тест // одномерный массив на 4 элемента
//set %arr [50 1] 544 
//set %arr [50 2] 800 // двумерный массив на 50 раз по 2 элемента
//set %ar.2 [5] // одномерный массив в параллельном скрипте
//left %arr [50] // клик левой кнопкой по координатам 544 800
! элементы массивов нельзя напрямую использовать в условных операторах
//if charposx &lt;&gt; %arr [50 1]
</p><p><b>2.05</b>
<br />Добавил переменную delimiter, используется для разделения элементов массива.
</p>
<pre>set %a [1 1] 1
set %a [1 2] 2
set delimiter '+'
msg %a [1]
set #n %a [1]
msg #n
set delimiter
set #n %a [1]
msg #n
</pre>
<p><b>2.38</b>
<br />Исправил определение имени переменной в команде 'set'.
</p>





		
		
		
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a  title="Служебная:Категории">Категория</a>: <ul><li><a  class="new" title="Категория:Работа с переменными (страница не существует)">Работа с переменными</a></li></ul>
		
		<div class="visualClear"></div>
		
	</div>
</div>

		
<br>
<div class="printfooter">Источник — <a dir="ltr" href="https://uopilot.uokit.com/wiki/index.php?title=Set&amp;oldid=736">https://uopilot.uokit.com/wiki/index.php?title=Set&amp;oldid=736</a></div></body>
</html>
 