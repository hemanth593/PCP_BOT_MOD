<!DOCTYPE html>
<html>
<head>
<title>Prompt — UoPilot</title>
<meta charset="UTF-8" />
<link rel="stylesheet" href="styles" />
</head>
<body>
<h1 id="firstHeading" class="firstHeading" lang="ru">Prompt</h1>
	
	<h2><span id="Описание"></span><span class="mw-headline" id=".D0.9E.D0.BF.D0.B8.D1.81.D0.B0.D0.BD.D0.B8.D0.B5">Описание</span></h2>
<p><b>Prompt</b> - оператор запроса ввода от пользователя. Запрашивает значения для строки, массива или числа.
<br />Для подсказки, содержащей больше одного слова, используйте кавычки.
<br />Для строки: в переменную(<b>$a</b>) записывается введенная строка. Если выбор не был сделан (нажатие ок без ввода строки) - записывается пустая строка.
<br />Для числа: в переменную(<b>#a</b>) записывается номер выбора. Если выбор не был сделан (нажатие ок без ввода строки) - записывается ноль.
<br />Для массива: в массив(<b>%a</b>) записываются все значения для каждого элемента. Если элемент был выбран - единица, если нет - ноль.
</p>
<h2><span id="Синтаксис"></span><span class="mw-headline" id=".D0.A1.D0.B8.D0.BD.D1.82.D0.B0.D0.BA.D1.81.D0.B8.D1.81">Синтаксис</span></h2>
<p>Привязка к окну: нет.
<br />Работа со свернутым окном: да.
</p>
<pre>Prompt ([!caption] &lt;line1&gt; [line2] [line3] [line4] [line5] ([timeout]))
</pre>
<p>Где:
<br /><b>[!caption]</b> - необязательный параметр. Подсказка, начинается с '!'.
<br /><b>&lt;line1&gt; [line2] [line3] [line4] [line5]</b> - набор значений для выбора. Одно или больше.
<br /><b>([timeout])</b> - таймаут (время для выбора значения), указывается в секундах в круглых скобках.
</p>
<pre>set $a prompt (подсказка)   
set #b prompt (выбор1 выбор2 выбор3 выбор4 выбор5)  
set %с prompt (выбор1 выбор2 выбор3 выбор4 выбор5)  
</pre>
<p><b>set $a prompt</b> - Запрос на ввод значения. Возвращает в переменную введенное значение.
<br /><b>set #b prompt</b> - Запрос на выбор значения. возвращает номер выбранного значения, либо 0. Выбор подтверждается закрытием окна.
<br /><b>set %с prompt</b> - Запрос на выбор нескольких значений. Возвращает указанный массив, содержащий в первой строке, по столбцам соответствующим номерам значений, либо 1 - если элемент выбран, либо 0. 
<br />
<br />Положение окна функции 'prompt':
</p>
<pre>promptpos_x
promptpos_y 
</pre>
<h2><span id="Примеры"></span><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B">Примеры</span></h2>
<pre>// Пример 1
set #a prompt (первый "второй выбор" третий)
msg #a
</pre>
<pre>// Пример 2
set $a prompt (Введите значение)  // Может быть как строкой, так и числом
msg Введено: $a 
</pre>
<pre>// Пример 3
set %a prompt (первый "второй выбор" третий)
    // если выбрано 1, иначе 0
msg %a[1]      // все значения в одну строку
    // значения отдельно 
msg %a[1 1]    // первое значение 
msg %a[1 2]    // второе
msg %a[1 3]    // третье
</pre>
<pre>// Пример 4
set promptpos_x 100    //установить координату 'Х' для окна Prompt
set promptpos_y 100    //установить координату 'Y' для окна Prompt
set #b prompt (выбор1 выбор2 выбор3 выбор4 выбор5)
msg #b
</pre>
<pre>// Пример 5
// Prompt из массива
set %a [1] 123
set %a [2] 456
set %a [3] 789
set %a [4] abc
set %a [5] def

set $a         //очищаем строку
for #i 1 size(%a)
    set $a $a %a[#i]       //создаём строку из всех элементов массива
end_for

set $b "prompt ($a ())"
set %b [1] "#a"          
eval (set %b[1] $b)              //выводим prompt
msg #a
End_script 
</pre>
<pre>// Пример 6
// Вывод Prompt с подсказкой 
set $str "Выбрать одно из значений:"       // подсказка
set #a prompt (!$str Один Два Три)
msg #a
</pre>
<pre>// Пример 7
// Вывод Prompt с таймаут
set $str "Выбрать одно из значений:"
set #a prompt (!$str Один Два Три (5))    // на выбор значения 5 секунд, если выбор не сделан вернёт в переменную '#a' 0.
msg #a
</pre>
<h2><span id="Смотрите_также"></span><span class="mw-headline" id=".D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5">Смотрите также</span></h2>
<p><a href="https://uopilot.uokit.com/wiki/index.php?title=Hint" title="Hint">Hint</a>
<br /><a href="https://uopilot.uokit.com/wiki/index.php?title=Promptpos_x" title="Promptpos x">Promptpos x</a>
</p>
<h2><span id="История_развития"></span><span class="mw-headline" id=".D0.98.D1.81.D1.82.D0.BE.D1.80.D0.B8.D1.8F_.D1.80.D0.B0.D0.B7.D0.B2.D0.B8.D1.82.D0.B8.D1.8F">История развития</span></h2>
<p><b>2.14</b>
<br />Добавил возможность из скрипта запросить значение у пользователя. 
</p>
<pre>'set $a prompt (&lt;подсказка&gt;)'
</pre>
<p>Запрос на ввод значения. возвращает в переменную введенное значение. 
</p>
<pre>'set #b prompt (&lt;выбор1&gt; &lt;выбор2&gt; [выбор3] [выбор4] [выбор5])'
</pre>
<p>Запрос на выбор значения. возвращает номер выбранного значения, либо 0. выбор подтверждается закрытием окна..
</p><p><b>2.20</b>
<br />Поправил внешний вид формочки 'prompt' и добавил кнопочку 'Ок'.
<br />Поправил 'prompt' на предмет соответствия заявленному функционалу, и добавил возможность выбора нескольких значений:
</p>
<pre>set $a prompt (подсказка)
</pre>
<p>Запрос на ввод значения. возвращает в переменную введенное значение. 
</p>
<pre>set #b prompt (выбор1 выбор2 выбор3 выбор4 выбор5)
</pre>
<p>Запрос на выбор значения. возвращает номер выбранного значения, либо 0. выбор подтверждается закрытием окна.
</p>
<pre>set %с prompt (выбор1 выбор2 выбор3 выбор4 выбор5)
</pre>
<p>Запрос на выбор нескольких значений. Возвращает указанный массив, содержащий в первой строке, по столбцам соответствующим номерам значений, либо 1 - если элемент выбран, либо 0
Пример:
</p>
<pre>set %s prompt (ch1 ch2 ch3 ch4 ch5)
set #a size (%s [ 1 ]) // строка всегда одна, но в ней несколько столбцов
set #b %s [ 1 #a ] // последний элемент
set $c %s [ 1 ] // получим чтото типа 10010, т.е. все элементы сразу.
</pre>
<p><b>2.21</b>
<br />Добавил в 'prompt' таймаут ожидания в секундах. Указывается после всех параметров в круглых скобках:
</p>
<pre>'set #b prompt (ch1 ch2 ch3 [(таймаут)])'
</pre>
<p>Исправил незначительную ошибку в функции 'prompt'. Не обнулялся массив результатов.
</p><p><b>2.27.2</b>
<br />Слегка подправил команду 'prompt':
<br />Исправил вывод подсказки при запросе текстового значения
<br />Добавил закрытие диалогового окна по клавише 'Enter'
<br />Добавил закрытие диалогового окна при выборе значения мышкой
<br />Добавил возможность указать многострочный комментарий с помощью '/n' при запросе строкового значения
<br />Добавил возможность простого выбора числового ответа с клавиатуры
<br />Снял ограничение на 5 элементов выбора
<br />Исправил отображение указанного таймаута ожидания в виде дополнительного пункта
<br />Немного косметики
<br />Если диалоговое окно закрылось по таймауту и в нем ничего не выбрано, то возвращается 0 или пустая строка, иначе - выбранный пункт
<br />Кнопка 'Ок' играет еще более символическую роль чем раньше
</p><p><b>2.29</b>
<br />Подправил малость 'prompt'.
<br />Подправил 'prompt', при остановке скрипта открытое окно промпта закрывается.
</p><p><b>2.32</b>
<br />Исправил ошибку в команде 'prompt', из-за которой все, что шло после пустых переменных игнорировалось.
<br />Исправил ошибку повторного вызова команды 'prompt', после остановки скрипта с активным окном промпта.
<br />Добавил в 'prompt' возможность выводить не нажимающиеся строки (без чекбоксов) с помощью восклицательного знака в начале строки.
</p>
<pre>set #s prompt (!Test&#160;! Passed)
</pre>
<p>Добавил в 'prompt' возможность выводить свой заголовок с помощью восклицательного знака, указанного в начале первой строки.
</p><p><b>2.36.2</b>
<br />Добавил переменные положения окна функции 'prompt': 'promptpos_x', 'promptpos_y'. Значения изменяются только для текущего скрипта.
</p><p><b>2.37</b>
<br />Починил чтение 'promptpos_x' и 'promptpos_y'.
</p><p><b>2.39</b>
<br />Исправил ошибку, возникающую при отсутствии пробела перед скобкой в команде 'prompt'.
</p><p><b>2.41</b>
<br />Расширил до 16к строку параметров передаваемую в команду 'prompt'.
<br />Сделал автоматическое определение ширины окна команды 'prompt'.
</p>





		
		
		
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a  title="Служебная:Категории">Категория</a>: <ul><li><a  class="new" title="Категория:Прочее (страница не существует)">Прочее</a></li></ul>
		
		<div class="visualClear"></div>
		
	</div>
</div>

		
<br>
<div class="printfooter">Источник — <a dir="ltr" href="https://uopilot.uokit.com/wiki/index.php?title=Prompt&amp;oldid=700">https://uopilot.uokit.com/wiki/index.php?title=Prompt&amp;oldid=700</a></div></body>
</html>
 