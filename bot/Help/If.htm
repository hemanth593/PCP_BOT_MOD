<!DOCTYPE html>
<html>
<head>
<title>If — UoPilot</title>
<meta charset="UTF-8" />
<link rel="stylesheet" href="styles" />
</head>
<body>
<h1 id="firstHeading" class="firstHeading" lang="ru">If</h1>
	
	<h2><span id="Описание"></span><span class="mw-headline" id=".D0.9E.D0.BF.D0.B8.D1.81.D0.B0.D0.BD.D0.B8.D0.B5">Описание</span></h2>
<p><b>if</b>- условный оператор содержит логическое выражение. Позволяет выполнять определенный код в зависимости от результатов некоторого условия. Так же выполняет проверку цвета пикселя и последнего сообщения от сервера (для ultima online). Операция принимает вид сравнения.
<br />Если логическое выражение истинно (true)- будет выполнен код. Если ложно (false)- код выполняться не будет. 
<br />Часто if используется в связке с else. Конструкция if-else имеет тот же вид, что if, но с дополнительной возможностью для выполнения другого кода, если условие не истинно (false).
<br />Для выполнения операций отрицания результата выражения используется приставка _not.
<br />Для поиска цвета пикселя необходимо указать координаты пикселя по оси XY (для абсолютных координат добавить в конце abs) и код цвета (можно найти в заголовке окна). Если указать ещё один код цвета2, то будет проверяться принадлежность пикселя к указанному диапазону цветов. Причем принадлежность к диапазону будет проверяться для каждого из каналов RGB отдельно, и условие IF будет истинным, только если значение каждого из каналов (RGB) пикселя будет между соответствующими значениями (R1..R2), (G1..G2), (B1..B2)
<br />Для операций сравнения используются знаки операций: &gt;, &lt;, =, &lt;=, &gt;=,&#160;!= идентично &lt;&gt;. Так же используются логические операторы or, and, xor. 
<br />or- логическое ИЛИ. Или один или другой или оба. 
<br />and- логическое И. И один и другой.
<br />xor- строгое логическое ИЛИ. Или один или другой, но не оба.
<br />Результатом логической операции является число 1, если результат истинный, или 0, если результат ложный.
<br />Для указания приоритета нескольких операций используются круглые скобки: (, ).
<br />В конце операции необходимо поставить end_if для корректного выполнения сценария.
</p>
<h2><span id="Синтаксис"></span><span class="mw-headline" id=".D0.A1.D0.B8.D0.BD.D1.82.D0.B0.D0.BA.D1.81.D0.B8.D1.81">Синтаксис</span></h2>
<p>Привязка к окну: опциональна.
<br />Работа со свернутым окном: частично.
</p>
<h2><span id="Примеры"></span><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B">Примеры</span></h2>
<pre>// Пример 1
if 2 &lt; 3
   msg два меньше трех
end_if
// Результат: вывод сообщения "два меньше трех"
</pre>
<pre>// Пример 2
if 2 &gt; 3
   msg два больше трех
else
   msg два не может быть больше трех
end_if
// Результат: вывод сообщения "два не может быть больше трех"
</pre>
<pre>// Пример 3
if 345, 567 456456
    log цвет найден
end_if
</pre>
<pre>// Пример 4
if 345, 567 456456
    log цвет найден
else
    log цвет не найден
end_if
</pre>
<pre>// Пример 5
if 345, 567 456456 and 340, 214 13727242
    log Оба цвета найдены
end_if
</pre>
<pre>// Пример 6
if_not 345, 567 456456
   msg цвет пикселя не найден
end_if
// Результат: вывод сообщения "цвет пикселя не найден"
</pre>
<pre>// Пример 7
if_not 345, 567 456456 abs
   msg цвет пикселя не найден
else
   msg найден цвет пикселя 
end_if
// Результат: вывод сообщения "цвет пикселя не найден"
</pre>
<pre>// Пример 8
if 345, 567 456456 2686770 abs
   msg цвет пикселя не найден в диапазоне 456456-2686770 (в шестнадцатеричном виде: 0x08F706 - 0x32FF28)
else
   msg цвет пикселя найден в диапазоне 456456-2686770
end_if
// Результат: вывод сообщения "цвет пикселя не найден в диапазоне 456456-2686770 (в шестнадцатеричном виде: 0x08F706 - 0x32FF28)"
</pre>
<pre>// Пример 9
set #two 2
set #five 5
if (#two &lt; #five) or (3 &lt; #five) 
     msg два меньше пяти или три меньше пяти
end_if
// Результат: вывод сообщения "два меньше пяти или три меньше пяти"
</pre>
<pre>// Пример 10
set #num 3
if (7&#160;!= 4) and (#num &lt;&gt; 4)
   msg семь не равно четырём и три не равно четырём
else 
   msg четыре и #num равно семи 
end_if 
// Результат: вывод сообщения "семь не равно четырём и три не равно четырём"
</pre>
<pre>// Пример 11
if 1 xor 0
   msg только 1 или 0 истинно, но не оба
end_if
// Результат: вывод сообщения "только 1 или 0 истинно, но не оба"
</pre>
<pre>// Пример 12
init_arr %a (1) 360 197 13529609    //задаём координаты и цвет в одну строку
set delimiter ' '                   //установить разделитель между элементами 'пробел'
if %a [1]                           //тоже самое что if %a [1 1] %a [1 2] %a [1 3]
    msg Цвет найден
    End_script
end_if
</pre>
<pre>// Пример 13
init_arr %a (1) 360 197 13529609    //задаём координаты и цвет, первая строка
init_arr %a (2) 424, 511 15979864   //задаём координаты и цвет, вторая строка
set delimiter ' '                   //установить разделитель между элементами 'пробел'
    //обратите внимание, когда используется больше 1 условия, то обязательно нужны круглые скобки.
if (%a [1]) and (%a [2])                           //тоже самое что if %a [1 1] %a [1 2] %a [1 3] and %a [2 1] %a [2 2] %a [2 3]
    msg Цвет найден
    End_script
end_if
</pre>
<pre>// Пример 14
// Выполнение действия в определённое время
// Можно использовать переменные hour(час), min(минута), sec(секунда)
if hour = 5 and min = 33        // в 5:33 выполнится условие
    // тут пишем что нужно выполнить, например:
    start_script 3               // запустить скрипт номер 3
    alarm                        // звуковой сигнал
    stop_script                  // остановить текущий скрипт    
end_if
</pre>
<pre>// Пример 15
if_not 100 100 255 or 232 456 13529609    // если отсутствуют оба цвета    
   // что-то делаем
end_if
// с условием if_not часто возникают некоторые недоразумения
// тут подробно и понятно написано что к чему: <a rel="nofollow" class="external free" href="https://forum.uokit.com/index.php?s=&amp;showtopic=20548&amp;view=findpost&amp;p=179583">https://forum.uokit.com/index.php?s=&amp;showtopic=20548&amp;view=findpost&amp;p=179583</a>
</pre>
<pre>// Пример 16
if_not 100 100 255 and 232 456 13529609    // если отсутствуют оба цвета или один из них    
   // что-то делаем
end_if
</pre>
<h2><span id="Смотрите_также"></span><span class="mw-headline" id=".D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5">Смотрите также</span></h2>
<p><a href="https://uopilot.uokit.com/wiki/index.php?title=While" title="While">While</a>
<br /><a href="https://uopilot.uokit.com/wiki/index.php?title=For" title="For">For</a>
<br /><a href="https://uopilot.uokit.com/wiki/index.php?title=Get_color" title="Get color">Get color</a>
<br /><a href="https://uopilot.uokit.com/wiki/index.php?title=Switch" title="Switch">Switch</a>
</p>
<h2><span id="История_развития"></span><span class="mw-headline" id=".D0.98.D1.81.D1.82.D0.BE.D1.80.D0.B8.D1.8F_.D1.80.D0.B0.D0.B7.D0.B2.D0.B8.D1.82.D0.B8.D1.8F">История развития</span></h2>
<p><b>0.98 alfa 8</b>
<br />Добавлены операции: &gt;, &lt;, =, &lt;&gt;:
</p>
<pre>if &lt;значение&gt; &lt;знак операции&gt; &lt;значение&gt;
    ...
end_if
</pre>
<p>Между знаком операции и значениями должен быть разделитель.
</p>
<dl><dd>Добавлена проверка последнего сообщения от сервера(только для Ultima Online):</dd></dl>
<pre>if lastmsg &lt;последнее сообщение от сервера&gt;
    ...
end_if
</pre>
<p>Сообщение от сервера можно писать не целиком.
</p><p><b>1.01 beta 7</b>
<br />Добавлена логика (and, or, xor) в условных операторах. Приоритетов нет, обрабатывается последовательно:
</p>
<pre>if hour = 23 and min = 45 or #count = 100
    end_script    
end_if
</pre>
<p><b>2.18</b>
<br />Добавил нечеткое сравнение строк. регистронезависимо. поддерживаются операции &lt;, &gt;, =, &lt;&gt;:
<br />&lt;= &amp;thinsp;S2 содержится в S1
<br />&gt;= &amp;thinsp;S1 содержится в S2
</p><p><b>2.20</b>
<br />Исправил поиск подстроки одного регистра в строке другого регистра, содержащих символы алфавита отличного от английского и заданных с помощью переменных:
</p>
<pre>set $substr  таня 
set $str textТАНЯтект
if $substr &gt;= $str
    msg found
end_if
</pre>
<p><b>2.21</b>
<br />Научил условные операторы принимать элеменнты массива в качестве параметров для определения цвета точки:
</p>
<pre>set %a[1] 110 120 8030463
set %a[2] 110 120
set %a[5 1] 110,
set %a[5 2] 120,
set %a[5 3] 8030463
if (%a[1]) and (%a[2] 8030463) and %a[5]
    ...
end_if
</pre>
<dl><dd>Научил условные операторы принимать в качестве параметров для определения цвета точки, координаты и цвет заданные одной строкой:</dd></dl>
<pre>set $a 110 120 8030463
set $b 110 120
if ($a) and ($b 8030463)
    ...
end_if
</pre>
<p><b>2.27.2</b>
<br />Исправил перманентный вис скрипта на конструкциях типа 'if %var = #var', и добавил вывод сообщения об ошибке.
</p><p><b>2.33</b>
<br />Исправил проверку последнего сообщения от сервера в конструкции 'if lastmsg anytext', сломанную в предыдущей версии.
</p>





		
		
		
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a  title="Служебная:Категории">Категория</a>: <ul><li><a  class="new" title="Категория:Условия (страница не существует)">Условия</a></li></ul>
		
		<div class="visualClear"></div>
		
	</div>
</div>

		
<br>
<div class="printfooter">Источник — <a dir="ltr" href="https://uopilot.uokit.com/wiki/index.php?title=If&amp;oldid=610">https://uopilot.uokit.com/wiki/index.php?title=If&amp;oldid=610</a></div></body>
</html>
 