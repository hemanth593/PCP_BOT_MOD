<!DOCTYPE html>
<html>
<head>
<title>Logging — UoPilot</title>
<meta charset="UTF-8" />
<link rel="stylesheet" href="styles" />
</head>
<body>
<h1 id="firstHeading" class="firstHeading" lang="ru">Logging</h1>
	
	<h2><span id="Описание"></span><span class="mw-headline" id=".D0.9E.D0.BF.D0.B8.D1.81.D0.B0.D0.BD.D0.B8.D0.B5">Описание</span></h2>
<h2><span id="Синтаксис"></span><span class="mw-headline" id=".D0.A1.D0.B8.D0.BD.D1.82.D0.B0.D0.BA.D1.81.D0.B8.D1.81">Синтаксис</span></h2>
<p>Привязка к окну: да.
<br />Работа со свернутым окном: да.
</p>
<pre>set logging &lt;text | option | mode [параметры]&gt;
</pre>
<p>альтернативная запись
</p>
<pre>log &lt;text | option | mode [параметры]&gt;
</pre>
<p><b>&lt;text&gt;</b> - текст для вывода в лог.
<br /><b>&lt;option&gt;</b> - зарезервированные строки, которые выполняют операции с логом:
</p>
<dl><dd><b>on</b> - включить запись в лог</dd>
<dd><b>off</b> - выключить запись в лог</dd>
<dd><b>clear</b> - очистить лог</dd>
<dd><b>save [path]</b> - сохранить лог в файл</dd>
<dd><b>open [x y] [width height]</b> - открыть окно лога. по-умолчанию x=y=-1, w03, h36</dd>
<dd><b>close</b> - закрыть окно лога</dd>
<dd><b>commands</b> - отображение в лог выполняющихся строк скрипта. Включается 'set logging commands', выключается 'set logging off'.</dd></dl>
<p><b>&lt;mode&gt;</b> - установка формата вывода в лог. Параметры:
</p>
<dl><dd><b>noTime</b>   - не выводить в лог время</dd>
<dd><b>noNumber</b> - не выводить в лог номер скрипта</dd>
<dd><b>noScript</b> - не выводить в лог имя скрипта</dd>
<dd><b>noLine</b>   - не выводить в лог номер строки</dd>
<dd><b>compact</b>  - всё выше перечисленное</dd>
<dd><b>без параметров</b> - установить настройки "по-умолчанию" (отображать всё)</dd></dl>
<pre>log mode [параметры]
</pre>
<p>Указывается либо &lt;option&gt; либо &lt;text&gt; либо &lt;mode&gt;, но не несколько одновременно.
</p>
<h2><span id="Примеры"></span><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B">Примеры</span></h2>
<p>Следует помнить:
</p>
<ul><li>Это общие логи пилота, которые всегда пишутся в Log Window (открыть можно из помощи пилота или опцией <b>set logging open</b>)</li>
<li>Лог нельзя разделить на части по разными файлам,</li>
<li>В каждом новом сохраненном файле будет запись о прошедших записях в лог.</li>
<li>Лог обнуляется при перезапуске пилота либо вызове set logging clear.</li>
<li>Для использования более детального логирования можно использовать <a href="https://uopilot.uokit.com/wiki/index.php?title=%D0%9C%D0%B0%D1%81%D1%81%D0%B8%D0%B2%D1%8B" title="Массивы">массивы</a> и оператор <b><a href="https://uopilot.uokit.com/wiki/index.php?title=Save_array" title="Save array">save_array</a></b>.</li></ul>
<pre>// Пример 1
 set #q 2
 set %s[1 1] 5
 set $s 3  // Пока не исправлен баг, строковую переменную обязательно нужно указать, иначе условие упадет
 set $luck удача
 set logging ---------------------------------------------------------------  // разделитель для удобства
 log я нашел %s[1 1] яблок, а скушал #q, и у меня их осталось $s // можно указывать сколько угодно переменных
 if $s &gt; 5  //  Если яблок осталось больше 5, то удачно покушали, иначе объелись
       set logging $luck  
    else 
       set logging $fail
 end_if
 set logging save c:\logs\apple.txt // пишем весь лог в файл
</pre>
<p>Результат в блокноте:
<br />20:07:55 17 (, 4):  - ---------------------------------------------------------------
<br />20:07:55 17 (, 5):  - я нашел 5 яблок, а скушал 2, и у меня их осталось 3
<br />20:07:55 17 (, 7):  - удача
</p>
<pre>//Пример 2
log mode compact
log Я нашел 5 яблок.
End_script
</pre>
<h2><span id="Смотрите_также"></span><span class="mw-headline" id=".D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5">Смотрите также</span></h2>
<p><a href="https://uopilot.uokit.com/wiki/index.php?title=Msg" title="Msg">Msg</a>
<br /><a href="https://uopilot.uokit.com/wiki/index.php?title=Alarm" title="Alarm">Alarm</a>
<br /><a href="https://uopilot.uokit.com/wiki/index.php?title=Save_array" title="Save array">Save_array</a>
</p>
<h2><span id="История_развития"></span><span class="mw-headline" id=".D0.98.D1.81.D1.82.D0.BE.D1.80.D0.B8.D1.8F_.D1.80.D0.B0.D0.B7.D0.B2.D0.B8.D1.82.D0.B8.D1.8F">История развития</span></h2>
<p><b>2.18</b>
<br />Добавил логи:
</p>
<pre>'set logging &lt;option | text&gt;'
</pre>
<p>Где option:
</p>
<dl><dd>'on' - включить запись в лог</dd>
<dd>'off' - выключить запись в лог</dd>
<dd>'clear' - очистить лог</dd>
<dd>'save [path]' - сохранить лог в файл</dd>
<dd>'open [x y] [width height]' - открыть окно лога. по-умолчанию x=y=-1, w03, h36</dd>
<dd>'close' - закрыть окно лога</dd></dl>
<p>Если не распознано, то просто записывается в лог. список команд пишущих в лог пока ограничен. предлагайте что и как должно в лог писать..
</p><p><b>2.23</b>
<br />Добавил возможность выводить в лог выполняющиеся строки скрипта. включается 'set logging commands', выключается 'set logging off'.
<br />Исправил перманентный вис на конуструкции типа 'set logging clear', 'set logging open'.
<br />Добавил возможность выводить в лог выполняющиеся строки скрипта.
<br />Включается:
</p>
<pre>'set logging commands'
</pre>
<p>выключается:
</p>
<pre>'set logging off'
</pre>
<p><b>2.30</b>
<br />Исправил непропечатывание некоторых символов в начале сообщения команды 'set logging'.
<br />Добавил галочку "Автоматически открывать лог" при использовании команды 'set logging text'.
<br />Добавил команду 'log', почти аналог 'set logging'.
</p><p><b>2.31</b>
<br />Команда 'set logging', указанная без параметров, выводит в лог пустую строку.
<br />Сделал вывод в лог настраиваемым отдельно для каждого скрипта с помощью команды 'set logging mode [параметры]'. Если, при очередном вызове этой команды, какой-либо параметр не указан, то он устанавливается в значение "по-умолчанию".
</p>
<pre>   параметры:
       noTime   - не выводить в лог время
       noNumber - не выводить в лог номер скрипта
       noScript - не выводить в лог имя скрипта
       noLine   - не выводить в лог номер строки
       compact  - всё выше перечисленное
       без параметров - установить настройки "по-умолчанию" (отображать всё)
</pre>
<p><b>2.32</b>
<br />Добавил вывод в скобках значения элемента массива после его имени, для команды 'set logging commands'.
<br />Добавил вывод значения переменной после присваивания в команде 'set', при включенном 'set logging commands'. Выводится отдельной строкой.
<br /><br />Добавил логи для каждого скрипта отдельно. По достижении 1000 строк, обрезается до 500. Переключаются при переключении закладок скрипта (при активном главном логе 'M', переключения не происходит), или непосредственно в окне лога.
В связи с этим к команде 'set logging'добавились два параметра:
</p>
<pre>   clear_current - очистить текущий персональный лог
   save_current &lt;path&gt; - сохранить текущий персональный лог в указанный файл
</pre>
<p>Исправил непропечатывание некоторых символов в начале сообщения команды 'log'.
</p>
<pre>set #a #a + #b * %arr [ 2 #c ] //  set #a(5) #a(5) + #b(8) * %arr [ 2 #c(11) ]
</pre>
<p><b>2.33</b>
<br />Пункт меню "?\Log Window", переделал в кнопочку "log" на закладке "Скрипт".
<br />Добавил галочку рядом с новой кнопочкой "log" на закладке "Скрипт", аналог команды 'set logging commands'.
<br />Починил команду 'log open'.
<br />Добавил команду 'log level [number]'.
</p><p><b>2.34</b>
<br />Дочинил команду 'log open'.
</p><p><b>2.36</b>
<br />Исправил вывод значения переменной после присваивания в команде 'set', при включенном 'set logging commands'.
<br />Добавил команду очистки логов всех скриптов 'set logging clear_All'. 
<br />Добавил в вывод в лог миллисекунды. Включается 'set logging mode fulltime'. Выключается 'set logging mode shorttime'.
</p><p><b>2.37</b>
<br />Добавил несколько зарезервированных переменных: (ПОКА ТОЛЬКО ДЛЯ ЧТЕНИЯ) 
</p>
<pre>'loghandle' - хэндл окна лога, либо '0', если не существует;
'logautoopen' - галочка из настроек "Автоматически открывать лог", соответственно '0' либо '1';
'messagesoutputto' - куда выводить сообщения:
    2 - ToMessageBox
    4 - ToHint
    8 - Dev/null
     если включено "ToLog", то + 1 соответственно.
</pre>
<p><b>2.38</b>
<br />Исправил ошибку, возникающую при выводе в лог больших объемов информации. Выводим в лог кусками по 16 кб. В файле лога в месте соединения будет перевод строки.
<br />Исправил незапланированный вывод в лог устаревшего сообщения об ошибке.
<br />Исправил вывод в лог сообщений об ошибках при включенной галочке "Выводить сообщения в... Log".
</p><p><b>2.39</b>
<br />Исправил установку размеров в команде 'log open', при первом открытии окна лога.
<br />Исправил команду 'log close', открывавшую закрытый лог.
</p>





		
		
		
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a  title="Служебная:Категории">Категория</a>: <ul><li><a  class="new" title="Категория:Оповещение (страница не существует)">Оповещение</a></li></ul>
		
		<div class="visualClear"></div>
		
	</div>
</div>

		
<br>
<div class="printfooter">Источник — <a dir="ltr" href="https://uopilot.uokit.com/wiki/index.php?title=Logging&amp;oldid=644">https://uopilot.uokit.com/wiki/index.php?title=Logging&amp;oldid=644</a></div></body>
</html>
 